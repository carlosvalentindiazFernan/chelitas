<link rel="import" href="../../bower_components/polymer-redux/polymer-redux.html">
<script>
    const initialState = {
        languages: [{
            name: 'english',
            key: 'en'
        }, {
            name: 'español',
            key: 'es'
        }],
        currentLenguage: 'en',//Lenguaje seleccionado para internacionalizacion por default español
        loginMethod: '',
        currentUser: {
            userName: '',
            lastName: '',
            firstName: '',
            logged: false,//Si alguien esta logueado sera true
            visited: [],//Lugares que el usuario actual ha visitado
            liked: [],//Lugares que el usuario actual le han gustado
            ranked: [],//Lugares que el usuario actual ha calificado
        },//Usuario loggeado
        users: [],//Usuarios registrados en la app
        places: []//Places que se llenaran al momento de consultar google places
    }

    function users(state = initialState, action){
        switch (action.type) {
            case "LOGIN_USER": {
                return Object.assign({}, state, {
                    languages: state.languages,
                    currentLenguage: state.currentLenguage,
                    loginMethod: action.method,
                    currentUser: state.currentUser,
                    users: state.users,
                    places: state.places
                });
            }
            case "ADD_USER": {
                const newUsers = state.users.splice(0);
                newUsers.push(action.user);
                return Object.assign({}, state, {
                    languages: state.languages,
                    currentLenguage: state.currentLenguage,
                    currentUser: state.currentUser,
                    users: state.users,
                    places: state.places
                });
            }
            case "REMOVE_USER": {
                const newUsers = state.users.splice(0);
                newUsers.splice(action.user);
                return Object.assign({}, state, {
                    languages: state.languages,
                    currentLenguage: state.currentLenguage,
                    currentUser: state.currentUser,
                    users: state.users,
                    places: state.places
                });
            }
            case "VISIT_PLACE": {
                return Object.assign({}, state, {
                    languages: state.languages,
                    currentLenguage: state.currentLenguage,
                    currentUser: state.currentUser,
                    users: state.users,
                    places: state.places
                });
            }
            case "LIKE_PLACE": {
                return Object.assign({}, state, {
                    languages: state.languages,
                    currentLenguage: state.currentLenguage,
                    currentUser: state.currentUser,
                    users: state.users,
                    places: state.places
                });
            }
            case "RANK_PLACE": {
                return Object.assign({}, state, {
                    languages: state.languages,
                    currentLenguage: state.currentLenguage,
                    currentUser: state.currentUser,
                    users: state.users,
                    places: state.places
                });
            }
            default: {
                return state;
            }
        }
    }
    const store = Redux.createStore(users);
    const ReduxMixin = PolymerRedux(store);

</script>
