<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<!--FIREBASE-->
<script src="https://www.gstatic.com/firebasejs/4.2.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.2.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.2.0/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.2.0/firebase-messaging.js"></script>



<dom-module id="chelitas-signin">
    <template>
        <style media="screen">
            :host{
                width: 100%;
                height: 100%;
            }
            .container{
                width: 100%;
                height: 100%;
                display: flex;
                flex-direction: row;
            }
            .mail{
                width: 50%;
                height: 100%;
            }
            .social{
                width: 50%;
                height: 100%;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
            }
        </style>
        <div class="container">
            <div class="mail">
                <paper-input label-float label="Email"></paper-input>
                <paper-input label-float label="Password"></paper-input>
                <paper-button on-click="loginFacebook">Submit</paper-button>
            </div>
            <div class="social">
                <paper-button>Facebook</paper-button>
            </div>
        </div>
    </template>
    <script>
        (function chelitasLoginDefinition(customElements){
            class ChelitasSignin extends Polymer.Element {
                static get is(){ return 'chelitas-signin'; }
                loginFacebook(){
                    var provider = new firebase.auth.FacebookAuthProvider();
                    provider.addScope('user_birthday');
                    firebase.auth().signInWithPopup(provider).then(function(result) {
                      // This gives you a Facebook Access Token. You can use it to access the Facebook API.
                      var token = result.credential.accessToken;
                      // The signed-in user info.
                      var user = result.user;
                      // ...
                    }).catch(function(error) {
                      // Handle Errors here.
                      var errorCode = error.code;
                      var errorMessage = error.message;
                      // The email of the user's account used.
                      var email = error.email;
                      // The firebase.auth.AuthCredential type that was used.
                      var credential = error.credential;
                      // ...
                    });

                    firebase.auth().onAuthStateChanged(function(user) {
                      if (user) {
                        console.log("loggeado");
                      } else {
                        console.log("no loggeado");
                      }
                    });
                }
            }

            customElements.define(ChelitasSignin.is, ChelitasSignin);
        })(window.customElements);
    </script>
</dom-module>
